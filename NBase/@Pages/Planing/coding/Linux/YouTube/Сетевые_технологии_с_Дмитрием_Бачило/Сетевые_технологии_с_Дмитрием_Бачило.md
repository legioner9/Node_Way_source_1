1. [Сетевые технологии с Дмитрием Бачило : Mosix](https://www.youtube.com/watch?v=-TqYul6LOyQ&list=PL5FMLPRj1j6IChoB7nBKYNjCNQ-DBnaq7&ab_channel=%D0%94%D0%BC%D0%B8%D1%82%D1%80%D0%B8%D0%B9%D0%91%D0%B0%D1%87%D0%B8%D0%BB%D0%BE)
2. [ : Ethernet](https://www.youtube.com/watch?v=U11ZpVOQAI8&list=PL5FMLPRj1j6IChoB7nBKYNjCNQ-DBnaq7&index=2&ab_channel=%D0%94%D0%BC%D0%B8%D1%82%D1%80%D0%B8%D0%B9%D0%91%D0%B0%D1%87%D0%B8%D0%BB%D0%BE)

[МАС адрес (media access control address)](https://ru.wikipedia.org/wiki/MAC-%D0%B0%D0%B4%D1%80%D0%B5%D1%81)

Обычно он записывается как шесть шестнадцатеричных чисел, разделенных двоеточием: 00:AB:CD:EF:11:22, хотя некоторые производители оборудования предпочитают запись вида 00-AB-CD-EF-11-22 и даже 00ab.cdef.1122.

![](_src/475px-MAC-48_Address.svg.png)

Windows — `ipconfig /all` — более подробно расписывает — какой MAC-адрес к какому сетевому интерфейсу относится;
Windows — `getmaс /v` — менее подробно расписывает — какой MAC-адрес к какому сетевому интерфейсу относится;
Linux — `ip link show`

`> config /all`

    Настройка протокола IP для Windows

    Имя компьютера  . . . . . . . . . : StNN-ПК
    Основной DNS-суффикс  . . . . . . :
    Тип узла. . . . . . . . . . . . . : Гибридный
    IP-маршрутизация включена . . . . : Нет
    WINS-прокси включен . . . . . . . : Нет

    Ethernet adapter Подключение по локальной сети:

    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Intel(R) 82579V Gigabit Network Connectio
    n
    Физический адрес. . . . . . . . . : 14-DA-E9-29-84-4A
    DHCP включен. . . . . . . . . . . : Да
    Автонастройка включена. . . . . . : Да
    Локальный IPv6-адрес канала . . . : fe80::29f2:956d:8ce2:5055%11(Основной)
    IPv4-адрес. . . . . . . . . . . . : 192.168.0.100(Основной)
    Маска подсети . . . . . . . . . . : 255.255.255.0
    Аренда получена. . . . . . . . . . : 22 октября 2020 г. 8:11:13
    Срок аренды истекает. . . . . . . . . . : 22 октября 2020 г. 12:50:25
    Основной шлюз. . . . . . . . . : 192.168.0.1
    DHCP-сервер. . . . . . . . . . . : 192.168.0.1
    IAID DHCPv6 . . . . . . . . . . . : 236247785
    DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-22-74-63-E3-14-DA-E9-29-84-4A

    DNS-серверы. . . . . . . . . . . : 192.168.0.1
                                        0.0.0.0
    NetBios через TCP/IP. . . . . . . . : Включен

    Туннельный адаптер isatap.{BF3AA840-0FFB-404D-B9E8-2753C483833E}:

    Состояние среды. . . . . . . . : Среда передачи недоступна.
    DNS-суффикс подключения . . . . . :
    Описание. . . . . . . . . . . . . : Адаптер Microsoft ISATAP #2
    Физический адрес. . . . . . . . . : 00-00-00-00-00-00-00-E0
    DHCP включен. . . . . . . . . . . : Нет
    Автонастройка включена. . . . . . : Да

    E:\Node_projects\Node_Way\NBase\@Pages\Planing\coding\Linux\YouTube\NetSkills\LI
    NUX_ДЛЯ_НАЧИНАЮЩИХ\_src\Презентации-20201022T013550Z-001>ipconfig

    Настройка протокола IP для Windows


    Ethernet adapter Подключение по локальной сети:

    DNS-суффикс подключения . . . . . :
    Локальный IPv6-адрес канала . . . : fe80::29f2:956d:8ce2:5055%11
    IPv4-адрес. . . . . . . . . . . . : 192.168.0.100
    Маска подсети . . . . . . . . . . : 255.255.255.0
    Основной шлюз. . . . . . . . . : 192.168.0.1

    Туннельный адаптер isatap.{BF3AA840-0FFB-404D-B9E8-2753C483833E}:

    Состояние среды. . . . . . . . : Среда передачи недоступна.
    DNS-суффикс подключения . . . . . :


Существует возможность смены MAC-адреса программным путём, так как его значение, указанное через драйвер, имеет более высокий приоритет, чем «зашитое» в плату. Однако всё же существует оборудование, в котором смену MAC-адреса произвести невозможно без программатора (обычно это телекоммуникационное оборудование; например, приставки для IP-TV (STB)).

В некоторых устройствах, оснащённых веб-интерфейсом управления, возможна смена MAC-адреса во время настройки: большинство маршрутизаторов позволяют дублировать MAC-адрес сетевой платы, через которую он подключён к компьютеру.

3. [: Маршрутизаторы](https://www.youtube.com/watch?v=gNheLMP9oNM&list=PL5FMLPRj1j6IChoB7nBKYNjCNQ-DBnaq7&index=3&ab_channel=%D0%94%D0%BC%D0%B8%D1%82%D1%80%D0%B8%D0%B9%D0%91%D0%B0%D1%87%D0%B8%D0%BB%D0%BE)

7 level of ASI - ([The Open Systems Interconnection model](https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_OSI))


= 

<table class="wikitable cc_cursor" border="1">

<tbody><tr>
<th colspan="6">Модель
</th></tr>
<tr>
<th colspan="2" style="width:10em;">Уровень (layer)
</th>
<th style="width:5em;">Тип данных (PDU<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">[1]</a></sup>)
</th>
<th style="width:10em;">Функции
</th>
<th style="width:5em;">Примеры
</th>
<th>Оборудование
</th></tr>
<tr>
<th rowspan="4">Host<br>layers
</th>
<td style="background:#d8ec9b;">7. <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BA%D0%BB%D0%B0%D0%B4%D0%BD%D0%BE%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" class="mw-redirect" title="Прикладной уровень">Прикладной (application)</a>
</td>
<td rowspan="3" style="background:#d8ec9c;">Данные
</td>
<td style="background:#d8ec9c;"><small>Доступ к сетевым службам</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/HTTP" title="HTTP">HTTP</a>, <a href="https://ru.wikipedia.org/wiki/FTP" title="FTP">FTP</a>, <a href="https://ru.wikipedia.org/wiki/POP3" title="POP3">POP3</a>, <a href="https://ru.wikipedia.org/wiki/WebSocket" title="WebSocket">WebSocket</a>
</td>
<td rowspan="4"><a href="https://ru.wikipedia.org/wiki/%D0%A5%D0%BE%D1%81%D1%82" title="Хост">Хосты</a>
<p>(клиенты сети)
</p>
</td></tr>
<tr>
<td style="background:#d8ec9b;">6. <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" title="Представительский уровень">Представления (p<i>resentation)</i></a>
</td>
<td style="background:#d8ec9b;"><small>Представление и <a href="https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" title="Шифрование">шифрование</a> данных</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/ASCII" title="ASCII">ASCII</a>, <a href="https://ru.wikipedia.org/wiki/EBCDIC" title="EBCDIC">EBCDIC</a>
</td></tr>
<tr>
<td style="background:#d8ec9b;">5. <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%B0%D0%BD%D1%81%D0%BE%D0%B2%D1%8B%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" title="Сеансовый уровень">Сеансовый (session)</a>
</td>
<td style="background:#d8ec9b;"><small>Управление сеансом связи</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/Remote_Procedure_Call" class="mw-redirect" title="Remote Procedure Call">RPC</a>, <a href="https://ru.wikipedia.org/wiki/Password_Authentication_Protocol" title="Password Authentication Protocol">PAP</a>, <a href="https://ru.wikipedia.org/wiki/L2TP" title="L2TP">L2TP</a>
</td></tr>
<tr>
<td style="background:#e7ed9c;">4. <a href="https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D1%81%D0%BF%D0%BE%D1%80%D1%82%D0%BD%D1%8B%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" title="Транспортный уровень">Транспортный (transport)</a>
</td>
<td style="background:#e7ed9c;"><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%B3%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" title="Сегментация пакетов">Сегменты</a>
<p>(segment) /<a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B0%D1%82%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0" title="Датаграмма">Датаграммы</a> (datagram)
</p>
</td>
<td style="background:#e7ed9c;"><small>Прямая связь между конечными пунктами и надёжность</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/Transmission_Control_Protocol" title="Transmission Control Protocol">TCP</a>, <a href="https://ru.wikipedia.org/wiki/User_Datagram_Protocol" class="mw-redirect" title="User Datagram Protocol">UDP</a>, <a href="https://ru.wikipedia.org/wiki/SCTP" title="SCTP">SCTP</a>, PORTS
</td></tr>
<tr>
<th rowspan="3">Media<sup id="cite_ref-2" class="reference"><a href="#cite_note-2">[2]</a></sup><br>layers
</th>
<td style="background:#eddc9c;">3. <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" class="mw-redirect" title="Сетевой уровень">Сетевой (network)</a>
</td>
<td style="background:#eddc9c;"><a href="https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D0%BA%D0%B5%D1%82_(%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B8)" title="Пакет (сетевые технологии)">Пакеты</a> (packet)
</td>
<td style="background:#eddc9c;"><small>Определение маршрута и логическая адресация</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/IPv4" title="IPv4">IPv4</a>, <a href="https://ru.wikipedia.org/wiki/IPv6" title="IPv6">IPv6</a>, <a href="https://ru.wikipedia.org/wiki/IPsec" title="IPsec">IPsec</a>, <a href="https://ru.wikipedia.org/wiki/AppleTalk" title="AppleTalk">AppleTalk</a>, <a href="https://ru.wikipedia.org/wiki/ICMP" title="ICMP">ICMP</a>
</td>
<td><a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80" title="Маршрутизатор">Маршрутизатор</a>
</td></tr>
<tr>
<td style="background:#e9c189;">2. <a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%B0%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C" title="Канальный уровень">Канальный (data link)</a>
</td>
<td style="background:#e9c189;">Биты (bit)/<br><a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%B0%D0%B4%D1%80_(%D1%82%D0%B5%D0%BB%D0%B5%D0%BA%D0%BE%D0%BC%D0%BC%D1%83%D0%BD%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8)" title="Кадр (телекоммуникации)">Кадры</a> (frame)
</td>
<td style="background:#e9c189;"><small>Физическая адресация</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/Point-to-Point_Protocol" class="mw-redirect" title="Point-to-Point Protocol">PPP</a>, <a href="https://ru.wikipedia.org/wiki/IEEE_802.22" title="IEEE 802.22">IEEE 802.22</a>, <a href="https://ru.wikipedia.org/wiki/Ethernet" title="Ethernet">Ethernet</a>, <a href="https://ru.wikipedia.org/wiki/XDSL" title="XDSL">DSL</a>, <a href="https://ru.wikipedia.org/wiki/ARP" title="ARP">ARP</a>, <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%BA%D0%B0%D1%80%D1%82%D0%B0" class="mw-redirect" title="Сетевая карта">сетевая карта</a>.
</td>
<td><a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%BC%D1%83%D1%82%D0%B0%D1%82%D0%BE%D1%80_Ethernet" class="mw-redirect" title="Коммутатор Ethernet">Коммутатор</a>,
<p><a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%B0%D1%8F_%D1%82%D0%BE%D1%87%D0%BA%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0" title="Беспроводная точка доступа">точка доступа</a>
</p>
</td></tr>
<tr>
<td style="background:#e9988a;">1. <a href="https://ru.wikipedia.org/wiki/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D1%81%D0%BB%D0%BE%D0%B9" class="mw-redirect" title="Физический слой">Физический (physical)</a>
</td>
<td style="background:#e9988a;"><a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B8%D1%82" title="Бит">Биты</a> (bit)
</td>
<td style="background:#e9988a;"><small>Работа со средой передачи, сигналами и двоичными данными</small>
</td>
<td><a href="https://ru.wikipedia.org/wiki/USB" title="USB">USB</a>, кабель («витая пара», коаксиальный, оптоволоконный), радиоканал
</td>
<td><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B0%D1%82%D0%BE%D1%80" title="Сетевой концентратор">Концентратор</a>
</td></tr></tbody></table>

4. [: DNS](https://www.youtube.com/watch?v=9FQ8cHrFMbo&list=PL5FMLPRj1j6IChoB7nBKYNjCNQ-DBnaq7&index=4&ab_channel=%D0%94%D0%BC%D0%B8%D1%82%D1%80%D0%B8%D0%B9%D0%91%D0%B0%D1%87%D0%B8%D0%BB%D0%BE)

[ipv4](https://ru.wikipedia.org/wiki/IPv4)

<table class="wikitable">
<tbody><tr>
<th>Форма записи</th>
<th>Пример</th>
<th>Преобразование из десятичной нотации с точками
</th></tr>
<tr>
<td><a href="/w/index.php?title=%D0%94%D0%B5%D1%81%D1%8F%D1%82%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D0%BD%D0%BE%D1%82%D0%B0%D1%86%D0%B8%D1%8F_%D1%81_%D1%82%D0%BE%D1%87%D0%BA%D0%B0%D0%BC%D0%B8&amp;action=edit&amp;redlink=1" class="new" title="Десятичная нотация с точками (страница отсутствует)">Десятичная с точками</a><span class="noprint" style="white-space:nowrap;font-size:85%"> (<a href="https://en.wikipedia.org/wiki/Dot-decimal_notation" class="extiw" title="en:Dot-decimal notation"><span title="Версия статьи «Десятичная нотация с точками» на английском языке">англ.</span></a>)</span></td>
<td><tt>192.0.2.235</tt></td>
<td>—
</td></tr>
<tr>
<td>Шестнадцатеричная с точками</td>
<td><tt>0xC0.0x00.0x02.0xEB</tt></td>
<td>Каждый <a href="https://ru.wikipedia.org/wiki/%D0%9E%D0%BA%D1%82%D0%B5%D1%82_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)" title="Октет (информатика)">октет</a> преобразуется в шестнадцатеричную форму
</td></tr>
<tr>
<td>Восьмеричная с точками</td>
<td><tt>0300.0000.0002.0353</tt></td>
<td>Каждый октет преобразуется в восьмеричную форму
</td></tr>
<tr>
<td><a href="https://ru.wikipedia.org/wiki/%D0%A8%D0%B5%D1%81%D1%82%D0%BD%D0%B0%D0%B4%D1%86%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" title="Шестнадцатеричная система счисления">Шестнадцатеричная</a></td>
<td><tt>0xC00002EB</tt></td>
<td><a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BD%D0%BA%D0%B0%D1%82%D0%B5%D0%BD%D0%B0%D1%86%D0%B8%D1%8F" title="Конкатенация">Конкатенация</a> октетов из шестнадцатеричной нотации с точками
</td></tr>
<tr>
<td><a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D1%81%D1%8F%D1%82%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" title="Десятичная система счисления">Десятичная</a></td>
<td><tt>3221226219</tt></td>
<td>32-битное число в десятичной форме
</td></tr>
<tr>
<td><a href="https://ru.wikipedia.org/wiki/%D0%92%D0%BE%D1%81%D1%8C%D0%BC%D0%B5%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" title="Восьмеричная система счисления">Восьмеричная</a></td>
<td><tt>030000001353</tt></td>
<td>32-битное число в восьмеричной форме
</td></tr></tbody></table>

### Структура заголовка пакета
Заголовок пакета IP содержит 14 полей, из которых 13 являются обязательными. Четырнадцатое поле предназначено для необязательных опций. Поля используют порядок байтов от старшего к младшему, старшие биты идут первыми. Первый бит имеет номер 0. Таким образом, например, поле с версией находится в четырёх старших битах первого байта. При передаче многооктетных значений старший октет передаётся первым.

<table class="wikitable cc_cursor" style="margin: 0 auto; text-align: center;">
<caption>IPv4 Header Format
</caption>
<tbody><tr>
<th style="border-bottom:none; border-right:none;">Отступ
</th>
<th style="border-left:none;"><a href="https://ru.wikipedia.org/wiki/%D0%9E%D0%BA%D1%82%D0%B5%D1%82_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)" title="Октет (информатика)">Октет</a>
</th>
<th colspan="8">0
</th>
<th colspan="8">1
</th>
<th colspan="8">2
</th>
<th colspan="8">3
</th></tr>
<tr>
<th style="border-top: none"><a href="https://ru.wikipedia.org/wiki/%D0%9E%D0%BA%D1%82%D0%B5%D1%82_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)" title="Октет (информатика)">Октет</a>
</th>
<th><a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B8%D1%82" title="Бит">Бит</a>
</th>
<th style="width:2.6%;">0
</th>
<th style="width:2.6%;">1
</th>
<th style="width:2.6%;">2
</th>
<th style="width:2.6%;">3
</th>
<th style="width:2.6%;">4
</th>
<th style="width:2.6%;">5
</th>
<th style="width:2.6%;">6
</th>
<th style="width:2.6%;">7
</th>
<th style="width:2.6%;">0
</th>
<th style="width:2.6%;">1
</th>
<th style="width:2.6%;">2
</th>
<th style="width:2.6%;">3
</th>
<th style="width:2.6%;">4
</th>
<th style="width:2.6%;">5
</th>
<th style="width:2.6%;">6
</th>
<th style="width:2.6%;">7
</th>
<th style="width:2.6%;">0
</th>
<th style="width:2.6%;">1
</th>
<th style="width:2.6%;">2
</th>
<th style="width:2.6%;">3
</th>
<th style="width:2.6%;">4
</th>
<th style="width:2.6%;">5
</th>
<th style="width:2.6%;">6
</th>
<th style="width:2.6%;">7
</th>
<th style="width:2.6%;">0
</th>
<th style="width:2.6%;">1
</th>
<th style="width:2.6%;">2
</th>
<th style="width:2.6%;">3
</th>
<th style="width:2.6%;">4
</th>
<th style="width:2.6%;">5
</th>
<th style="width:2.6%;">6
</th>
<th style="width:2.6%;">7
</th></tr>
<tr>
<th>0
</th>
<th>0
</th>
<td colspan="4">Версия
</td>
<td colspan="4">Размер заголовка
</td>
<td colspan="6"><a href="https://ru.wikipedia.org/wiki/DSCP" class="mw-redirect" title="DSCP">Differentiated Services Code Point</a>
</td>
<td colspan="2"><a href="https://ru.wikipedia.org/wiki/Explicit_Congestion_Notification" title="Explicit Congestion Notification">Explicit Congestion Notification</a>
</td>
<td colspan="16">Размер пакета (полный)
</td></tr>
<tr>
<th>4
</th>
<th>32
</th>
<td colspan="16">Идентификатор
</td>
<td colspan="3">Флаги
</td>
<td colspan="13">Смещение фрагмента
</td></tr>
<tr>
<th>8
</th>
<th>64
</th>
<td colspan="8"><a href="https://ru.wikipedia.org/wiki/Time_to_live" title="Time to live">Время жизни</a>
</td>
<td colspan="8"><a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB%D0%BE%D0%B2_IP" class="mw-redirect" title="Список протоколов IP">Протокол</a>
</td>
<td colspan="16"><a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%81%D1%83%D0%BC%D0%BC%D0%B0" title="Контрольная сумма">Контрольная сумма</a> заголовка
</td></tr>
<tr>
<th>12
</th>
<th>96
</th>
<td colspan="32">IP-адрес источника
</td></tr>
<tr>
<th>16
</th>
<th>128
</th>
<td colspan="32">IP-адрес назначения
</td></tr>
<tr>
<th>20
</th>
<th>160
</th>
<td colspan="32" style="background:#ffbbbb;">Опции (если размер заголовка &gt; 5)
</td></tr>
<tr>
<th>20 или 24+
</th>
<th>160 или 192+
</th>
<td colspan="32">Данные
</td></tr>
</tbody></table>

## [DNS сервер BIND (теория)](https://www.k-max.name/linux/dns-server-bind/)

### Версия
Первым полем заголовка пакета является версия протокола размером в четыре бита. Для IPv4 это 4.
Размер заголовка (Internet Header Length)
Следующие четыре бита содержат размер заголовка пакета в 32-битных словах. Поскольку число опций не постоянно, указание размера важно для отделения заголовка от данных. Минимальное значение равно 5 (5×32=160 бит, 20 байт), максимальное — 15 (60 байт).
### Differentiated Services Code Point (DSCP)
Изначально называлось «тип обслуживания» (Type of Service, ToS), в настоящее время определяется RFC 2474 как «Differentiated Services». Используется для разделения трафика на классы обслуживания, например, для установки чувствительному к задержкам трафику, такому как VoIP, большего приоритета.
### Указатель перегрузки (Explicit Congestion Notification, ECN)
Предупреждение о перегрузке сети без потери пакетов. Является необязательной функцией и используется только если оба хоста её поддерживают.
### Размер пакета
16-битный полный размер пакета в байтах, включая заголовок и данные. Минимальный размер равен 20 байтам (заголовок без данных), максимальный — 65535 байт. Хосты должны поддерживать передачу пакетов размером до 576 байт, но современные реализации обычно поддерживают гораздо больший размер. Пакеты большего размера, чем поддерживает канал связи, фрагментируются.
### Идентификатор
Преимущественно используется для идентификации фрагментов пакета, если он был фрагментирован. Существуют эксперименты по его использованию для других целей, таких как добавление информации о трассировке пакета для упрощения отслеживания пути пакета с подделанным адресом источника.[12]
### Флаги
Поле размером три бита содержащее флаги контроля над фрагментацией. Биты, от старшего к младшему, означают:
0: Зарезервирован, должен быть равен 0.[13]
1: Не фрагментировать
2: У пакета ещё есть фрагменты
Если установлен флаг «не фрагментировать», то в случае необходимости фрагментации такой пакет будет уничтожен. Может использоваться для передачи данных хостам, не имеющим достаточных ресурсов для обработки фрагментированных пакетов.
Флаг «есть фрагменты» должен быть установлен в 1 у всех фрагментов пакета, кроме последнего. У нефрагментированных устанавливается в 0 — такой пакет считается собственным последним фрагментом.
### Смещение фрагмента
Поле размером в 13 бит, указывает смещение поля данных текущего фрагмента относительно начала поля данных первого фрагментированного пакета в блоках по 8 байт. Позволяет (213−1)×8=65528 байт смещения. При учёте размера заголовка итоговое смещение может превысить максимальный размер пакета (65528 + 20 = 65548 байт). Первый фрагмент в последовательности имеет нулевое смещение.
### «Время жизни» (Time to Live, TTL) пакета
Определяет максимальное количество маршрутизаторов на пути следования пакета. Наличие этого параметра не позволяет пакету бесконечно ходить по сети. Каждый маршрутизатор при обработке пакета должен уменьшить значение TTL на единицу. Пакеты, время жизни которых стало равно нулю, уничтожаются, а отправителю посылается сообщение ICMP Time Exceeded. На отправке пакетов с разным временем жизни основана трассировка их пути прохождения (traceroute). Максимальное значение TTL=255. Обычное начальное значение TTL=64 (зависит от ОС).
### Протокол
Указывает, данные какого протокола IP содержит пакет (например, TCP или ICMP). Присвоенные номера протоколов можно найти на сайте IANA.[14]
### Контрольная сумма заголовка
16-битная контрольная сумма, используемая для проверки целостности заголовка. Каждый хост или маршрутизатор сравнивает контрольную сумму заголовка со значением этого поля и отбрасывает пакет, если они не совпадают. Целостность данных IP не проверяет — она проверяется протоколами более высоких уровней (такими, как TCP или UDP), которые тоже используют контрольные суммы.
Поскольку TTL уменьшается на каждом шаге прохождения пакета, сумма тоже должна вычисляться на каждом шаге. Метод пересчёта контрольной суммы определён в RFC 1071.[15]
### Адрес источника
32-битный адрес отправителя пакета. Может не совпадать с настоящим адресом отправителя из-за трансляции адресов.
### Адрес назначения
32-битный адрес получателя пакета. Также может меняться при трансляции адресов.
### Опции
За адресом назначения может следовать поле дополнительных опций, но оно используется редко. Размер заголовка в этом случае должен быть достаточным, чтобы вместить все опции (с учётом дополнения до целого числа 32-битных слов). Присвоенные номера опций размещаются на сайте IANA.[16]
Если список опций не является концом заголовка, он должен оканчиваться опцией 0x00. Опции имеют следующий формат:

## [Настройка DNS на компьютере с Windows](https://www.comss.ru/page.php?id=754)

## Что такое DNS-зоны?
В этой статье мы рассматриваем лишь вариант «один — один IP-адрес». На самом деле, ситуация может быть и сложнее. Так, с определенным доменным именем может быть связано несколько ресурсов — сайт и почтовый сервер. У этих ресурсов вполне могут быть разные IP-адреса, что дает возможность повысить надежность и эффективность работы сайта или почтовой системы. Есть у сайтов и поддомены, IP-адреса которых тоже могут быть разными.

Вся эта информация о связи сайта, поддоменов, почтовой системы хранится в специальном файле на DNS-сервере. Его содержимое называется DNS-зона. Файл содержит следующие типы записей:

### А
 — адрес веб-ресурса, который привязан к конкретному имени домена.

(address record/запись адреса) отображают имя хоста (доменное имя) на адрес IPv4. Для каждого сетевого интерфейса машины должна быть сделана одна A-запись. Например, следующая запись отображает доменное имя k-max.name. в IPv4 адрес хоста 81.177.139.65 (поле NAME — 

            k-max.name., поле TTL — 86400, поле CLASS — IN, поле DATA — 81.177.139.65):

### AAAA (IPv6 address record)
 аналогична записи A, но для IPv6.            
### MX
 — адрес почтового сервера.

 (mail exchange) — указывает хосты для доставки почты, адресованной домену. При этом поле NAME указывает домен назначения, поля TTL, CLASS — стандартное значение, поле TYPE принимает значение MX, а поле DATA указывает приоритет и через пробел - доменное имя хоста, ответственного за прием почты. Например, следующая запись показывает, что для домена k-max.name направлять почту сначала на mx.k-max.name, затем на mx2.k-max.name, если с mx.k-max.name возникли какие-то проблемы. При этом, для обоих MX хостов должны быть соответствующие A-записи:

    k-max.name.             17790   IN      MX      10 mx.k-max.name.
    k-max.name.             17790   IN      MX      20 mx2.k-max.name.
### CNAME
 — чаще всего этот тип записи используется для подключения поддомена.

 (canonical name record/каноническая запись имени (псевдоним)) — отображает алиас на реальное имя (для перенаправления на другое имя), например, следующая запись задает алиас ftp для хоста www.k-max.name.:

            ftp             86400   IN      CNAME       www.k-max.name.
### NS
 — адрес DNS-сервера, который отвечает за содержимое других ресурсных записей.

 (name server/сервер имён) указывает на DNS-сервер, обслуживающий данный домен. Вернее будет сказать — указывают сервера, на которые делегирован данный домен. Если записи NS относятся к серверам имен для текущей зоны, доменная система имен их практически не использует. Они просто поясняют, как организована зона и какие машины играют ключевую роль в обеспечении сервиса имен. Например, зону name. обслуживают следующие NS:

    name.                   5772    IN      NS      l6.nstld.com.
    name.                   5772    IN      NS      m6.nstld.com.
    name.                   5772    IN      NS      c6.nstld.com.
    name.                   5772    IN      NS      j6.nstld.com.

зону k-max.name обслуживают:

    k-max.name.             1577    IN      NS      ns2.jino.ru.
    k-max.name.             1577    IN      NS      ns1.jino.ru.
### TXT
 — любая текстовая информация о доменном имени.
### SPF
 — данные с указанием списка серверов, которые входят в список доверенных для отправки писем от имени указанного домена.
### SOA
 — исходная запись зоны, в которой указаны сведения о сервере и которая содержит шаблонную информацию о доменном имени.

 (Start of Authority/начальная запись зоны) — описывает основные/начальные настройки зоны, можно сказать, определяет зону ответственности данного сервера. Для каждой зоны должна существовать только одна запись SOA и она должна быть первая. Поле Name содержит имя домена/зоны, поля TTL, CLASS — стандартное значение, поле TYPE принимает значение SOA, а поле DATA состоит из нескольких значений, разделенных пробелами: имя главного DNS (Primary Name Server), адрес администратора зоны, далее в скобках — серийный номер файла зоны (Serial number). При каждом внесении изменений в файл зоны данное значение необходимо увеличивать, это указывает вторичным серверам, что зона изменена, и что им необходимо обновить у себя зону. Далее — значения таймеров (Refresh — указывает, как часто вторичные серверы должны опрашивать первичный, чтобы узнать, не увеличился ли серийный номер зоны, Retry — время ожидания после неудачной попытки опроса, Expire — максимальное время, в течение которого вторичный сервер может использовать информацию о полученной зоне, Minimum TTL — минимальное время, в течение которого данные остаются в кэше вторичного сервера). Ниже в примере приведено 2 одинаковые записи SOA (хотя вторая и записана в несколько строк), но они одинаковы по значению и формат записи второй более понятен в силу его структурированности:

    k-max.name.             86400   IN      SOA     ns1.jino.ru. hostmaster.jino.ru. 2011032003 28800 7200 604800 86400
    k-max.name.             86400   IN      SOA     ns1.jino.ru. hostmaster.jino.ru. (
                                                    2011032003 ; serial (серийный номер)
                                                    28800 ; refresh (обновление)
                                                    7200 ; retry (повторная попытка)
                                                    604800 ; expire (срок годности)
                                                    86400) ; minimum TTL (минимум)

### SRV 
(server selection) — указывают на сервера, обеспечивающие работу тех или иных служб в данном домене (например  Jabber и Active Directory).


## Клиенты DNS (resolver)

Как же программы на конечных машинах знают куда и в каком виде посылать запросы DNS? Они этого не знают. Для разрешения имен и IP адресов клиентскими приложениями используется библиотека Resolver. Это не какое-то специальное приложение, это функциональность системы (ядра). Т.о. приложения посылают системные вызовы gethostbyname(2) и gethostbyaddr(2), а ядро уже на основании настроек в файле /etc/nsswitch.conf определяет по какому пути ему далее действовать. Данный файл определяет какие сервисы (будь то файл /etc/hosts или DNS) и в каком порядке использовать. В ранних версиях библиотеки Linux — libc, использовался файл `/etc/host.conf`. Вот фрагмент файла, который нас интересует:

    root@DNS:~# cat /etc/nsswitch.conf
    ......
    hosts:          files dns
    networks:       files

    Две строки данного фрагмента указывают ядру производить преобразование имен хостов в IP (строка hosts: files dns) сначала из файла hosts, затем силами DNS, а так же преобразование имен сетей в IP (строка networks: files) с помощью файла /etc/network.Возможны так же параметры nis или nisplu, определяющие использовать Network Information System (NIS) чтобы найти адрес. Порядок, в котором перечислены сервисы, определяет последовательность их опроса.
Если согласно /etc/nsswitch.conf запрос отправляется DNS, то используются настройки из файла /etc/resolv.conf, который определяет какие серверы DNS использовать. Вот типичный пример файла `/etc/resolv.conf`:

    root@DNS:~# cat /etc/resolv.conf
    nameserver 192.168.1.1
    nameserver 192.168.1.2
    domain  examle.com

